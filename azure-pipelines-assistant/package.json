{
  "name": "azure-pipelines-assistant",
  "displayName": "Azure Pipelines Assistant",
  "description": "Manage Azure DevOps pipelines directly from VS Code",
  "version": "0.0.1",
  "publisher": "azure-pipelines-assistant",
  "engines": {
    "vscode": "^1.94.0"
  },
  "categories": [
    "Azure",
    "Other"
  ],
  "keywords": [
    "azure",
    "devops",
    "pipelines",
    "ci/cd",
    "build"
  ],
  "activationEvents": [
    "onView:azurePipelinesExplorer"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "views": {
      "explorer": [
        {
          "id": "azurePipelinesExplorer",
          "name": "Azure Pipelines",
          "when": "azurePipelinesAssistant.configured"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "azurePipelinesExplorer",
        "contents": "Welcome to Azure Pipelines Assistant!\n\nTo get started, configure your Azure DevOps organization and Personal Access Token.\n\n[Configure Extension](command:azurePipelinesAssistant.configure)\n\n[Show Welcome Guide](command:azurePipelinesAssistant.showWelcome)\n\nNeed help? [View Documentation](https://docs.microsoft.com/en-us/azure/devops/integrate/get-started/authentication/pats)",
        "when": "!azurePipelinesAssistant.configured"
      }
    ],
    "commands": [
      {
        "command": "azurePipelinesAssistant.configure",
        "title": "Configure Azure DevOps",
        "icon": "$(gear)"
      },
      {
        "command": "azurePipelinesAssistant.refresh",
        "title": "Refresh",
        "icon": "$(refresh)"
      },
      {
        "command": "azurePipelinesAssistant.runPipeline",
        "title": "Run Pipeline",
        "icon": "$(play)"
      },
      {
        "command": "azurePipelinesAssistant.viewInBrowser",
        "title": "View in Browser",
        "icon": "$(link-external)"
      },
      {
        "command": "azurePipelinesAssistant.viewRunDetails",
        "title": "View Run Details",
        "icon": "$(info)"
      },
      {
        "command": "azurePipelinesAssistant.viewLogs",
        "title": "View Logs",
        "icon": "$(output)"
      },
      {
        "command": "azurePipelinesAssistant.downloadArtifacts",
        "title": "Download Artifacts",
        "icon": "$(cloud-download)"
      },
      {
        "command": "azurePipelinesAssistant.addToFavorites",
        "title": "Add to Favorites",
        "icon": "$(star-empty)"
      },
      {
        "command": "azurePipelinesAssistant.removeFromFavorites",
        "title": "Remove from Favorites",
        "icon": "$(star-full)"
      },
      {
        "command": "azurePipelinesAssistant.viewRecentRuns",
        "title": "View Recent Runs",
        "icon": "$(history)"
      },
      {
        "command": "azurePipelinesAssistant.cancelRun",
        "title": "Cancel Run",
        "icon": "$(stop)"
      },
      {
        "command": "azurePipelinesAssistant.approveRun",
        "title": "Approve Run",
        "icon": "$(check)"
      },
      {
        "command": "azurePipelinesAssistant.rejectRun",
        "title": "Reject Run",
        "icon": "$(x)"
      },
      {
        "command": "azurePipelinesAssistant.monitorRun",
        "title": "Monitor Run",
        "icon": "$(eye)"
      },
      {
        "command": "azurePipelinesAssistant.stopMonitoring",
        "title": "Stop Monitoring",
        "icon": "$(eye-closed)"
      },
      {
        "command": "azurePipelinesAssistant.compareRuns",
        "title": "Compare Runs",
        "icon": "$(diff)"
      },
      {
        "command": "azurePipelinesAssistant.resetConfiguration",
        "title": "Reset Configuration",
        "icon": "$(refresh)"
      },
      {
        "command": "azurePipelinesAssistant.exportConfiguration",
        "title": "Export Configuration",
        "icon": "$(export)"
      },
      {
        "command": "azurePipelinesAssistant.importConfiguration",
        "title": "Import Configuration",
        "icon": "$(import)"
      },
      {
        "command": "azurePipelinesAssistant.openSettings",
        "title": "Open Settings",
        "icon": "$(settings-gear)"
      },
      {
        "command": "azurePipelinesAssistant.validateConfiguration",
        "title": "Validate Configuration",
        "icon": "$(check)"
      },
      {
        "command": "azurePipelinesAssistant.showWelcome",
        "title": "Show Welcome",
        "icon": "$(home)"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "azurePipelinesAssistant.refresh",
          "when": "view == azurePipelinesExplorer",
          "group": "navigation"
        },
        {
          "command": "azurePipelinesAssistant.configure",
          "when": "view == azurePipelinesExplorer",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "azurePipelinesAssistant.runPipeline",
          "when": "view == azurePipelinesExplorer && viewItem == pipeline",
          "group": "inline"
        },
        {
          "command": "azurePipelinesAssistant.viewInBrowser",
          "when": "view == azurePipelinesExplorer && viewItem =~ /^(project|pipeline|run)$/",
          "group": "navigation"
        },
        {
          "command": "azurePipelinesAssistant.addToFavorites",
          "when": "view == azurePipelinesExplorer && viewItem =~ /^(project|pipeline)$/ && !azurePipelinesAssistant.isFavorite",
          "group": "favorites"
        },
        {
          "command": "azurePipelinesAssistant.removeFromFavorites",
          "when": "view == azurePipelinesExplorer && viewItem =~ /^(project|pipeline)$/ && azurePipelinesAssistant.isFavorite",
          "group": "favorites"
        },
        {
          "command": "azurePipelinesAssistant.viewRecentRuns",
          "when": "view == azurePipelinesExplorer && viewItem == pipeline",
          "group": "pipeline"
        },
        {
          "command": "azurePipelinesAssistant.compareRuns",
          "when": "view == azurePipelinesExplorer && viewItem =~ /^(pipeline|run)$/",
          "group": "pipeline"
        },
        {
          "command": "azurePipelinesAssistant.viewRunDetails",
          "when": "view == azurePipelinesExplorer && viewItem == run",
          "group": "run"
        },
        {
          "command": "azurePipelinesAssistant.viewLogs",
          "when": "view == azurePipelinesExplorer && viewItem == run",
          "group": "run"
        },
        {
          "command": "azurePipelinesAssistant.downloadArtifacts",
          "when": "view == azurePipelinesExplorer && viewItem == run",
          "group": "run"
        },
        {
          "command": "azurePipelinesAssistant.cancelRun",
          "when": "view == azurePipelinesExplorer && viewItem == run && azurePipelinesAssistant.canCancel",
          "group": "run"
        },
        {
          "command": "azurePipelinesAssistant.approveRun",
          "when": "view == azurePipelinesExplorer && viewItem == run && azurePipelinesAssistant.needsApproval",
          "group": "approval"
        },
        {
          "command": "azurePipelinesAssistant.rejectRun",
          "when": "view == azurePipelinesExplorer && viewItem == run && azurePipelinesAssistant.needsApproval",
          "group": "approval"
        },
        {
          "command": "azurePipelinesAssistant.monitorRun",
          "when": "view == azurePipelinesExplorer && viewItem == run && !azurePipelinesAssistant.isMonitoring",
          "group": "monitoring"
        },
        {
          "command": "azurePipelinesAssistant.stopMonitoring",
          "when": "view == azurePipelinesExplorer && viewItem == run && azurePipelinesAssistant.isMonitoring",
          "group": "monitoring"
        }
      ],
      "commandPalette": [
        {
          "command": "azurePipelinesAssistant.configure",
          "title": "Azure Pipelines: Configure"
        },
        {
          "command": "azurePipelinesAssistant.refresh",
          "title": "Azure Pipelines: Refresh"
        },
        {
          "command": "azurePipelinesAssistant.runPipeline",
          "title": "Azure Pipelines: Run Pipeline",
          "when": "false"
        },
        {
          "command": "azurePipelinesAssistant.viewInBrowser",
          "title": "Azure Pipelines: View in Browser",
          "when": "false"
        },
        {
          "command": "azurePipelinesAssistant.resetConfiguration",
          "title": "Azure Pipelines: Reset Configuration"
        },
        {
          "command": "azurePipelinesAssistant.exportConfiguration",
          "title": "Azure Pipelines: Export Configuration"
        },
        {
          "command": "azurePipelinesAssistant.importConfiguration",
          "title": "Azure Pipelines: Import Configuration"
        },
        {
          "command": "azurePipelinesAssistant.openSettings",
          "title": "Azure Pipelines: Open Settings"
        },
        {
          "command": "azurePipelinesAssistant.validateConfiguration",
          "title": "Azure Pipelines: Validate Configuration"
        },
        {
          "command": "azurePipelinesAssistant.showWelcome",
          "title": "Azure Pipelines: Show Welcome"
        }
      ]
    },
    "configuration": {
      "title": "Azure Pipelines Assistant",
      "properties": {
        "azurePipelinesAssistant.organization": {
          "type": "string",
          "description": "Azure DevOps organization name (e.g., 'myorg' for https://dev.azure.com/myorg)",
          "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$",
          "patternErrorMessage": "Organization name must contain only letters, numbers, and hyphens, and cannot start or end with a hyphen",
          "order": 1
        },
        "azurePipelinesAssistant.personalAccessToken": {
          "type": "string",
          "description": "Personal Access Token for Azure DevOps (Note: This setting is deprecated - tokens are now stored securely)",
          "deprecationMessage": "This setting is deprecated. Use the 'Configure Azure DevOps' command to set your token securely.",
          "order": 2
        },
        "azurePipelinesAssistant.refreshInterval": {
          "type": "number",
          "default": 30,
          "minimum": 10,
          "maximum": 300,
          "description": "Auto-refresh interval in seconds for pipeline data",
          "order": 3
        },
        "azurePipelinesAssistant.maxRunsPerPipeline": {
          "type": "number",
          "default": 10,
          "minimum": 1,
          "maximum": 50,
          "description": "Maximum number of recent runs to display per pipeline",
          "order": 4
        },
        "azurePipelinesAssistant.showTimestamps": {
          "type": "boolean",
          "default": true,
          "description": "Show timestamps in logs and run details",
          "order": 5
        },
        "azurePipelinesAssistant.autoRefresh": {
          "type": "boolean",
          "default": true,
          "description": "Enable automatic refresh of pipeline data in the background",
          "order": 6
        },
        "azurePipelinesAssistant.favoriteProjects": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "List of favorite project IDs for quick access",
          "order": 7
        },
        "azurePipelinesAssistant.favoritePipelines": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "projectId": {
                "type": "string"
              },
              "pipelineId": {
                "type": "number"
              },
              "name": {
                "type": "string"
              }
            },
            "required": ["projectId", "pipelineId", "name"]
          },
          "default": [],
          "description": "List of favorite pipelines for quick access",
          "order": 8
        },
        "azurePipelinesAssistant.cacheTimeout": {
          "type": "number",
          "default": 300,
          "minimum": 60,
          "maximum": 3600,
          "description": "Cache timeout in seconds for API responses",
          "order": 9
        },
        "azurePipelinesAssistant.logLevel": {
          "type": "string",
          "enum": ["error", "warn", "info", "debug"],
          "default": "info",
          "description": "Logging level for extension diagnostics",
          "order": 10
        },
        "azurePipelinesAssistant.showWelcomeOnStartup": {
          "type": "boolean",
          "default": true,
          "description": "Show welcome message when extension starts and is not configured",
          "order": 11
        },
        "azurePipelinesAssistant.compactView": {
          "type": "boolean",
          "default": false,
          "description": "Use compact view in the pipeline tree to show more items",
          "order": 12
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "npm run check-types && npm run lint && node esbuild.js",
    "watch": "npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "package": "npm run check-types && npm run lint && node esbuild.js --production",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "npm run compile-tests && npm run compile && npm run lint",
    "check-types": "tsc --noEmit",
    "lint": "eslint src",
    "test": "node run-specific-tests.js",
    "test:pipeline-trigger": "node run-pipeline-trigger-tests.js"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.10",
    "@types/node": "20.x",
    "@types/sinon": "^17.0.4",
    "@types/vscode": "^1.102.0",
    "@typescript-eslint/eslint-plugin": "^8.31.1",
    "@typescript-eslint/parser": "^8.31.1",
    "@vscode/test-cli": "^0.0.11",
    "@vscode/test-electron": "^2.5.2",
    "esbuild": "^0.25.3",
    "eslint": "^9.25.1",
    "glob": "^11.0.3",
    "npm-run-all": "^4.1.5",
    "sinon": "^21.0.0",
    "typescript": "^5.8.3"
  }
}
